@model Web.Models.InventarioDetalleViewModel

@{
    ViewData["Title"] = "Detalles de Repuesto";
}
<div class="d-flex justify-content-between align-items-center mb-4">
    <a href="javascript:history.back()" class="btn btn-secondary">
        <i class="bi bi-arrow-left-circle me-2"></i>Volver
    </a>
    <h2>@Model.Nombre - SKU: @Model.Sku</h2>
</div>

<dl class="row">
    <dt class="col-sm-2">Marca</dt>
    <dd class="col-sm-10">@Model.Marca</dd>
    <dt class="col-sm-2">Categoría</dt>
    <dd class="col-sm-10">@Model.CategoriaNombre</dd>
    <dt class="col-sm-2">Stock Disponible</dt>
    <dd class="col-sm-10">@Model.StockDisponible</dd>
    <dt class="col-sm-2">Stock Reservado</dt>
    <dd class="col-sm-10">@Model.StockReservado</dd>
    <dt class="col-sm-2">Precio Unitario</dt>
    <dd class="col-sm-10">@Model.PrecioUnitario.ToString("C0", new System.Globalization.CultureInfo("es-CL"))</dd>
</dl>

<h3>Editar Stock Unitario</h3>
<form id="editForm">
    <input type="hidden" id="editRepuestoId" value="@Model.RepuestoUnidadesId">
    <div class="form-group">
        <label>Variación Stock Disponible</label>
        <input type="number" id="variacionDisp" class="form-control" value="0">
    </div>
    <div class="form-group">
        <label>Variación Stock Reservado</label>
        <input type="number" id="variacionRes" class="form-control" value="0">
    </div>
    <div class="form-group">
        <label>Nuevo Precio Unitario (opcional)</label>
        <input type="number" id="nuevoPrecio" class="form-control">
    </div>
    <div class="form-group">
        <label>Nota</label>
        <textarea id="notaStock" class="form-control"></textarea>
    </div>
    <button type="button" class="btn btn-primary" id="guardarStockUnitario">Guardar</button>
</form>

<h3>Logs</h3>
<div id="logsContainer"></div>

<button class="btn btn-danger mt-3" id="eliminarAsignacion">Eliminar de Inventario</button>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="~/js/inventario-detalle.js"></script>
}